# NatureRemoClient
NatureRemoã®APIã‚’CLIã‹ã‚‰å©ã‘ã‚‹ã‚ˆã†ã«ä½œæˆã—ã¾ã—ãŸã€‚  
ç†ç”±ã¨ã—ã¦ã¯æ¥­å‹™ä¸­ã‚„ä½œæ¥­ä¸­ã«PCã‚’è§¦ã‚‹ã“ã¨ãŒãƒ¡ã‚¤ãƒ³ã§ã‚ã‚‹ãŸã‚ã€ã‚¹ãƒžãƒ›çµŒç”±ã‹ã‚‰ã®å®¶é›»æ“ä½œã«ç…©ã‚ã—ã•ã‚’æ„Ÿã˜ãŸãŸã‚ã§ã™ã€‚  

å…¬å¼API
> https://swagger.nature.global/#/

## å®Ÿè£…
`Elixir-lang: 1.12` ã«ã¦å®Ÿè£…ã—ã¾ã—ãŸã€‚åŸºæœ¬çš„ã«ã¯å…¬é–‹ã•ã‚Œã¦ã„ã‚‹APIã‚’`HTTPoison`ã‚’ä½¿ã£ã¦å‘¼ã³å‡ºã—ã¦ã„ã‚‹ã ã‘ã§ã™ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒžãƒƒãƒã¨è‡ªå‹•ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿ & é–¢æ•°å‘¼ã³å‡ºã—(é–¢æ•°åã¯`execute`ã§å›ºå®š)ã«ã¦ç°¡å˜ã«æ‹¡å¼µå‡ºæ¥ã‚‹ã‚ˆã†ã«ã—ã¦ã‚ã‚Šã¾ã™ã€‚  

ç¾åœ¨ã€ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å®¶é›»ã¯2ç¨®é¡žã§ã™ã€‚

- ç…§æ˜Ž
- ã‚¨ã‚¢ã‚³ãƒ³

## æ‹¡å¼µ
`lib/devices`ç›´ä¸‹ã«ã€å¯¾å¿œã•ã›ãŸã„å®¶é›»1ã¤ã«ã¤ãã€1ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”¨æ„ã—ã¾ã™ã€‚  
ã‚³ãƒžãƒ³ãƒ‰å®Ÿè¡Œæ™‚ã«å‘¼ã³å‡ºã—ãŸã„åå‰ãŒãã®ã¾ã¾ãƒ•ã‚¡ã‚¤ãƒ«åã«ãªã‚Šã¾ã™ã€‚  

ä¾‹: ãƒªãƒ“ãƒ³ã‚°ã®ãƒ†ãƒ¬ãƒ“ã‚’è¿½åŠ ã™ã‚‹
```elixir
# /lib/devices/living_tv.exã‚’ä½œæˆ
defmodule NatureRemoClient.Devices.Living_tv do
  :
  :
end
```

ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åã¯ãƒ•ã‚¡ã‚¤ãƒ«åã®å…ˆé ­æ–‡å­—ã‚’å¤§æ–‡å­—ã«å¤‰æ›´ã—ãŸã‚‚ã®ã‚’ä½œæˆã—ã¾ã™ã€‚ã¾ãŸ`ãƒã‚¤ãƒ•ãƒ³`ã‚„`ãƒ”ãƒªã‚ªãƒ‰`ã®ã‚ˆã†ãªã€`Elixir`ã«ã¦`Atom`ã¨ã—ã¦ä½¿ç”¨å‡ºæ¥ãªã„æ–‡å­—ã¯ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒå‡ºæ¥ã¾ã›ã‚“ã€‚  

ä½œæˆã—ãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¸­ã«`execute/2`ã¨ã„ã†åå‰ã®é–¢æ•°ã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚å¼•æ•°ã¯ã‚³ãƒžãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰æ¸¡ã—ãŸå€¤ãŒä»¥ä¸‹ã®ã‚ˆã†ã«å¯¾å¿œã—ã¾ã™ã€‚  

```bash
./nature_remo_client -d "living_tv ch 5"
```

```elixir
def execute(:living_tv, ["ch", "5"])
```

ç¬¬ä¸€å¼•æ•°ã«ã¯`-d`ã«æ¸¡ã—ãŸ1ã¤ç›®ã®å¼•æ•°ãŒ`Atom`ã¨ã—ã¦æ¸¡ã•ã‚Œã¦ãã¾ã™ã€‚æ®‹ã‚Šã®å€¤ã¯ç¬¬äºŒå¼•æ•°ã«`[String]`ã®åž‹ã§å—ã‘æ¸¡ã•ã‚Œã¾ã™ã€‚

## ã‚µãƒ³ãƒ—ãƒ«
â€»äº‹å‰ã«ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’buildã—ã¦ç½®ãå¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  
```bash
bash escript.build.sh 
```
`nature_remo_client`ã¨ã„ã†ãƒã‚¤ãƒŠãƒªãƒ•ã‚¡ã‚¤ãƒ«ãŒå‡ºåŠ›ã•ã‚Œã¾ã™ã€‚  

â€»åˆã‚ã›ã¦ã€NatureRemoã®ã‚µãƒãƒ¼ãƒˆãƒšãƒ¼ã‚¸ã«ã¦ç™ºè¡Œã—ãŸã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç’°å¢ƒå¤‰æ•°`NATURE_REMO_ACCESS_TOKEN`ã«è¨˜éŒ²ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚  

> ~/.bash_profile
```bash
export NATURE_REMO_ACCESS_TOKEN="XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX"
```
> ref: https://home.nature.global/

### ç…§æ˜Ž
ç…§æ˜Žã‚’ON
```bash
> ./nature_remo_client -d "light on"
```

ç…§æ˜Žã‚’OFF
```bash
> ./nature_remo_client -d "light off"
```

ã‚·ãƒ¼ãƒ³ã‚’ON
```bash
> ./nature_remo_client -d "light on scene"
```

å¸¸å¤œç¯ã‚’ON
```bash
> ./nature_remo_client -d "light on night"
```

### ã‚¨ã‚¢ã‚³ãƒ³
ã‚¨ã‚¢ã‚³ãƒ³ã‚’ON
```bash
> ./nature_remo_client -d "aircon on"
```

ã‚¨ã‚¢ã‚³ãƒ³ã‚’OFF
```bash
> ./nature_remo_client -d "aircon off"
```

ã‚¨ã‚¢ã‚³ãƒ³ã‚’å†·æˆ¿ã«è¨­å®š
```bash
> ./nature_remo_client -d "aircon set mode cool"
```

è¨­å®šæ¸©åº¦ã‚’å¤‰æ›´
```bash
> ./nature_remo_client -d "aircon set degree 25"
```

OKBã®ãŠæ°—ã«å…¥ã‚Šå¤ç”¨ã‚¨ã‚¢ã‚³ãƒ³è¨­å®šã«å¤‰æ›´
(â€»ã‚ªãƒªã‚¸ãƒŠãƒ«è¨­å®šã‚’ç°¡å˜ã«ä½œæˆå‡ºæ¥ã¾ã™ðŸ˜‹)
```bash
> ./nature_remo_client -d "aircon set mode summer"
```